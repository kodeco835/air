#!/bin/bash


# iOS

npx react-native bundle \
    --platform ios \
    --dev false \
    --entry-file index.js \
    --bundle-output bundle/devclient.ios.bundle 

tee > ios/EXDevelopmentClientBundle.cpp <<EOF
// NOTE: Autogenerated using 'bundle/write_embedded_bundle.sh' in 'expo-development-client' package

#include "EXDevelopmentClientBundle.h"
const unsigned int EXDevelopmentClientBundleLength = $(wc -c < bundle/devclient.ios.bundle) + 2;
const char *EXDevelopmentClientBundle = R"DELIM(
$(cat bundle/devclient.ios.bundle)





)DELIM";
EOF

rm bundle/devclient.ios.bundle


# Android

npx react-native bundle \
    --platform android \
    --dev false \
    --entry-file index.js \
    --bundle-output android/src/main/res/raw/expo_development_client_android.bundle



